<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Negociações</title>
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/bootstrap-theme.css">
</head>

<body class="container">
    <h1 class="text-center"> Negociações</h1>

    <div id="mensagemView"></div>

    <form class="form" onsubmit="negociacaoController.adiciona(event)">

        <div class="form-group">
            <labe for="data">
                <b>Data:</b>
            </labe>
            <input type="date" id="data" class="form-control" required autofocus>
        </div>

        <div class="form-group">
            <label for="quantidade">Quantidade:</label>
            <input type="number" id="quantidade" min="1" step="1" value="1" class="form-control" required>
        </div>

        <div class="form-group">
            <label for="valor">Valor:</label>
            <input id="valor" type="number" min="0.01" step="0.01" value="0.0" class="form-control" required>
        </div>

        <button class="btn btn-primary text-center" type="submit">Incuir</button>

        <div class="text-center">
            <button onclick="negociacaoController.importaNegociacoes()" class="btn btn-primary text-center" type="button">Importar Negociações</button>
            <button onclick="negociacaoController.apaga()" class="btn btn-primary text-center" type="button">Apagar</button>
        </div>
    </form>
    <br>
    <div id="negociacoesView"></div>
    <script src="js/app/models/ListaNegociacao.js"></script>
    <script src="js/app/models/Negociacao.js"></script>
    <script src="js/app/models/Mensagem.js"></script>
    <script src="js/app/Helpers/DateHelper.js"></script>
    <script src="js/app/View/View.js"></script>
    <script src="js/app/View/NegociacoesView.js"></script>
    <script src="js/app/View/MensagemView.js"></script>
    <script src="js/app/Controllers/NegociacaoController.js"></script>
    <script src="js/app/Services/ProxyFactory.js"></script>
    <script src="js/app/Helpers/Bind.js"></script>
    <script src="js/app/Services/NegociacoesServices.js"></script>
    <script>
        let negociacaoController = new NegociacaoController();

    </script>

    <!-- <script>

       let lista = new Proxy(new ListaNegociacao(),{
           get(target,prop,receiver){
               if(['adiciona','esvazia'].includes(prop) && typeof(target[prop]) == typeof(Function)){

                return function(){
                  console.log(`interceptando a :${prop}`)  
                  Reflect.apply(target[prop],target,arguments)    
                }

               }
               return Reflect.get(target,prop,receiver)
           }
       })
       lista.adiciona(new Negociacao(new Date(),1,100))
       lista.esvazia();
       
        let negociacao = new Proxy(new Negociacao(new Date(), 1, 100), {

            get : function(target,prop,receiver){
                console.log(`a propiedade "${prop}" foi interceptada`)
                return Reflect.get(target,prop,receiver)
            }

             set : function(target,prop,value,receiver){
                console.log(`valor anterior:${target[prop]},novo valor: ${value}`)
                return Reflect.set(target,prop,value,receiver)
            }
        });
    
        console.log(negociacao.Quantidade);
        console.log(negociacao.Valor);
        negociacao._quantidade = 10;
        negociacao._valor = 100;
    
    </script> -->
</body>

</html>